<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>محاسبه هزینه ساختمان با جواز</title>
<style>
  body {
    font-family: Tahoma, sans-serif;
    padding: 20px;
    background: #f0f0f0;
    direction: rtl;
  }
  .title{
    display: block;
    width: 100%;
    height: 200px;
    background-color: #00a4ff;
    clip-path: polygon(0 0, 100% 0, 100% 75%, 50% 100%, 0 75%);
    position: absolute;
    top: 0;
    right: 0;
  }
  .title h1 {
    text-align: center;
    color: #fff;
    font-size: 28px;
    line-height: 100px;
  }
  .container {
    max-width: 550px;
    margin: auto;
    background: white;
    padding: 200px 20px 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
  }
  input {
    width: 95%;
    padding: 10px;
    margin-top: 10px;
    font-size: 16px;
    margin-bottom: 20px;
    border-radius: 10px;
    border: 2px solid #00a4ff;
  }
  button{
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    background-color: #00a4ff;
    color: #FFF;
    font-size: 21px;
    border: 2px solid #00a4ff;
    transition: 0.5s;
  }
  button:hover{
    color: #000;
    background-color: #fff;
    cursor: pointer;
  }
  .result {
    margin-top: 20px;
    padding: 10px;
    background: #e0f7fa;
    border-radius: 5px;
  }
</style>
</head>
<body>

<div class="container">
    <div class="title">
        <h1>محاسبه هزینه تمام شده ساختمان با جواز</h1>
    </div>
  
  <label>تعداد طبقات:</label>
  <input type="number" id="floors" placeholder="مثال: 5">

  <label>متراژ هر طبقه (متر مربع):</label>
  <input type="number" id="area" placeholder="مثال: 120">

  <label>متراژ پیلوت (متر مربع):</label>
  <input type="number" id="parkingarea" placeholder="مثال: 300">

  <label>تعداد پارکینگ تامین شده:</label>
  <input type="number" id="parking" placeholder="مثال: 2">

  <label>قیمت منطقه‌ای هر متر مربع جواز (تومان):</label>
  <input type="number" id="regionPrice" placeholder="مثال: 1500000">

  <button onclick="calculateCost()">محاسبه هزینه</button>

  <div class="result" id="result"></div>
</div>

<script>
function getPermitCoefficient(area) {
  if(area <= 60) return 0.05;
  if(area <= 100) return 0.10;
  if(area <= 150) return 0.18;
  if(area <= 200) return 0.30;
  if(area <= 300) return 0.45;
  if(area <= 400) return 0.65;
  if(area <= 500) return 0.90;
  return 1.20;
}

function calculatePermitCost(totalArea, parking, regionPrice) {
  const coefficient = getPermitCoefficient(totalArea);
  const permitCost = (coefficient * totalArea - (parking * 20)) * regionPrice;
  return permitCost > 0 ? permitCost : 0;
}

function calculateCost() {
  const parkingarea = parseFloat(document.getElementById('parkingarea').value);  
  const floors = parseFloat(document.getElementById('floors').value);
  const area = parseFloat(document.getElementById('area').value);
  const parking = parseFloat(document.getElementById('parking').value);
  const regionPrice = parseFloat(document.getElementById('regionPrice').value);

  if (isNaN(floors) || isNaN(area) || floors <= 0 || area <= 0 || isNaN(parking) || parking < 0 || isNaN(regionPrice) || regionPrice <= 0) {
    alert('لطفاً همه فیلدها را به درستی وارد کنید.');
    return;
  }

  const totalArea = (floors * area)+parkingarea;

  // هزینه ساخت (تومان)
  const minCostPerM2 = 11_000_000;
  const avgCostPerM2 = 16_000_000;
  const maxCostPerM2 = 20_000_000;

  const minBuild = totalArea * minCostPerM2;
  const avgBuild = totalArea * avgCostPerM2;
  const maxBuild = totalArea * maxCostPerM2;

  // هزینه جواز
  const permitCost = calculatePermitCost(totalArea, parking, regionPrice);

  const minTotal = minBuild + permitCost;
  const avgTotal = avgBuild + permitCost;
  const maxTotal = maxBuild + permitCost;

  document.getElementById('result').innerHTML = `
    <p>مساحت کل ساختمان: <b>${totalArea} متر مربع</b></p>
    <p>هزینه جواز شهرداری: <b>${permitCost.toLocaleString()} تومان</b></p>
    <p>کمترین هزینه کل: <b>${minTotal.toLocaleString()} تومان</b></p>
    <p>هزینه میانه کل: <b>${avgTotal.toLocaleString()} تومان</b></p>
    <p>بیشترین هزینه کل: <b>${maxTotal.toLocaleString()} تومان</b></p>
  `;
}
</script>

</body>
</html>
